{
  "hash": "d96f2fb740713ff42dd3c33e2181b8ba",
  "result": {
    "engine": "jupyter",
    "markdown": "---\nformat:\n  html: default\n  pdf: default\ntitle: Problem Set 2 (SOLUTIONS)\n---\n\n\n\n\n\nThis problem set will take you through some Stata commands to estimate simple regression equations with dummy variables. You will learn how to interpret the estimated coefficients and test some linear hypotheses. Interpretation of these coefficients will be useful when we do treatment evaluation models later in term 1.\n\nThe hypothesis tests discussed in this problem set include standard T-tests and F-tests, which is assumed undergraduate knowledge for this module. \n\nYou will need to download the dataset problemset2.dta, which is available on Moodle.\n\n## Conditional Expectation Function\n\nConsider the Conditional Expectation Function (CEF), $E[Y_i|X_i]$. If $X$ takes on discrete values: $X_i\\in\\{x_1,x_2,...,x_m\\}$, then \n\n$$\n\tE[Y_i|X_i] =  E[Y_i|X_i=x_1]\\cdot\\mathbf{1}\\{X_i = x_1\\}+...+E[Y_i|X_i=x_m]\\cdot\\mathbf{1}\\{X_i = x_m\\}\n$$\nwhere $\\mathbf{1}\\{X_i = x_m\\}$ is a dummy variable, $=1$ when $X_i=x_m$. Since the values of $X_i$ are mutually exclusive there is no overlap of these dummy variables. \n\nNote, we do not need to assume that $X$ is a single random variable. It can be a vector of random variables that takes on discrete values. \n\nWe can re-arrange this expression using anyone of the values of $X$. The natural option is to choose the first, but this is arbitrary.\n\n$$\n\\begin{aligned}\n\tE[Y_i|X_i] =& E[Y_i|X_i=x_1]+ (E[Y_i|X_i=x_2]-E[Y_i|X_i=x_1])\\cdot\\mathbf{1}\\{X_i = x_2\\}+... \\\\\n&+(E[Y_i|X_i=x_m]-E[Y_i|X_i=x_1])\\cdot\\mathbf{1}\\{X_i = x_m\\}\n\\end{aligned}\n$$\n\nSince, $E[Y_i|X_i = x_m]$ is a constant ($X_i$ is set to a specific value), we can express the CEF as a function that is linear in parameters. \n\n$$\n\tE[Y_i|X_i] = \\beta_1 + \\beta_2D_{i2} + ... + \\beta_m D_{im}\n$$\n\nwhere $D_{im}\\mathbf{1}\\{X_i = x_m\\}$.\n\n\n## Preamble\n\n\n::: {.cell execution_count=1}\n\n::: {.cell-output .cell-output-display}\n```\n<IPython.core.display.HTML object>\n```\n:::\n:::\n\n\nCreate a do-file for this problem set and include a preamble that sets the directory and opens the data. For example, \n\n::: {.cell execution_count=2}\n``` {.stata .cell-code}\nclear \n//or, to remove all stored values (including macros, matrices, scalars, etc.) \n*clear all\n\n* Replace $rootdir with the relevant path to on your local harddrive.\ncd \"$rootdir/problem-sets/ps-2\"\n\ncap log close\nlog using problem-set-2.txt, replace\n\nuse problem-set-2-data.dta\n```\n:::\n\n\n## Questions\n\n**1.**\tConsider the $E[ln(Wage_i)|Gender_i]$, where $Gender_i\\in\\{1 ``Male'', 2 ``Female''\\}$. Show that this CEF implies a linear model, \n\n$$\n\tln(Wage_i) = \\beta_1 + \\beta_2 D_{i2} + \\varepsilon_i \n$$\n \nWhat do the parameters $\\beta_1$ and $\\beta_2$ imply? \n\n$$\nE[ln(Wage_i)|G_i] = E[ln(Wage_i)|G_i=1]+ (E[ln(Wage_i)|G_i=2]-E[ln(Wage_i)|G_i=1])\\cdot\\mathbf{1}\\{G_i = 2\\}\n$$\n$$\n = \\beta_1+ \\beta_2D_{i2}\n$$\n$\\Rightarrow E[\\varepsilon_i|D_{i2}]=0$.\n\n**2.** Regress `lwage` (log wage) on just a set of binary indicators that will enable you to test the hypothesis that males and females are on average, paid the same wage, ceteris paribus. Test this hypothesis.\n\n::: {.cell execution_count=3}\n``` {.stata .cell-code}\nreg lwage female\n\n* or\n\ngen male=1-female\nreg lwage male\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n      Source |       SS           df       MS      Number of obs   =     4,165\n-------------+----------------------------------   F(1, 4163)      =    491.72\n       Model |  93.6914807         1  93.6914807   Prob > F        =    0.0000\n    Residual |  793.213421     4,163  .190538895   R-squared       =    0.1056\n-------------+----------------------------------   Adj R-squared   =    0.1054\n       Total |  886.904902     4,164  .212993492   Root MSE        =    .43651\n\n------------------------------------------------------------------------------\n       lwage | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n      female |  -.4744661   .0213967   -22.17   0.000     -.516415   -.4325171\n       _cons |   6.729774     .00718   937.29   0.000     6.715697     6.74385\n------------------------------------------------------------------------------\n\n      Source |       SS           df       MS      Number of obs   =     4,165\n-------------+----------------------------------   F(1, 4163)      =    491.72\n       Model |  93.6914807         1  93.6914807   Prob > F        =    0.0000\n    Residual |  793.213421     4,163  .190538895   R-squared       =    0.1056\n-------------+----------------------------------   Adj R-squared   =    0.1054\n       Total |  886.904902     4,164  .212993492   Root MSE        =    .43651\n\n------------------------------------------------------------------------------\n       lwage | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n        male |   .4744661   .0213967    22.17   0.000     .4325171     .516415\n       _cons |   6.255308    .020156   310.34   0.000     6.215791    6.294824\n------------------------------------------------------------------------------\n```\n:::\n:::\n\n\nAlternatively, you could use Stata's factor notation:\n\n::: {.cell execution_count=4}\n``` {.stata .cell-code}\nreg lwage i.female\n\n//note: defaults to smallest value as base category. This can be changed as follows.\n\nreg lwage ib1.female\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n      Source |       SS           df       MS      Number of obs   =     4,165\n-------------+----------------------------------   F(1, 4163)      =    491.72\n       Model |  93.6914807         1  93.6914807   Prob > F        =    0.0000\n    Residual |  793.213421     4,163  .190538895   R-squared       =    0.1056\n-------------+----------------------------------   Adj R-squared   =    0.1054\n       Total |  886.904902     4,164  .212993492   Root MSE        =    .43651\n\n------------------------------------------------------------------------------\n       lwage | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n    1.female |  -.4744661   .0213967   -22.17   0.000     -.516415   -.4325171\n       _cons |   6.729774     .00718   937.29   0.000     6.715697     6.74385\n------------------------------------------------------------------------------\n\n      Source |       SS           df       MS      Number of obs   =     4,165\n-------------+----------------------------------   F(1, 4163)      =    491.72\n       Model |  93.6914807         1  93.6914807   Prob > F        =    0.0000\n    Residual |  793.213421     4,163  .190538895   R-squared       =    0.1056\n-------------+----------------------------------   Adj R-squared   =    0.1054\n       Total |  886.904902     4,164  .212993492   Root MSE        =    .43651\n\n------------------------------------------------------------------------------\n       lwage | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n    0.female |   .4744661   .0213967    22.17   0.000     .4325171     .516415\n       _cons |   6.255308    .020156   310.34   0.000     6.215791    6.294824\n------------------------------------------------------------------------------\n```\n:::\n:::\n\n\nIt is evident from the test p-value that the difference is statistically significantly. Note, the standard `reg` command assume homoskedastic SEs. If we believe that the variance varies of (log of) wages varies with gender, we should estimate heteroskedastic SEs. However, in this instance it will not make a difference to the conclusion. \n\n::: {.cell execution_count=5}\n``` {.stata .cell-code}\nreg lwage female, r\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nLinear regression                               Number of obs     =      4,165\n                                                F(1, 4163)        =     520.64\n                                                Prob > F          =     0.0000\n                                                R-squared         =     0.1056\n                                                Root MSE          =     .43651\n\n------------------------------------------------------------------------------\n             |               Robust\n       lwage | Coefficient  std. err.      t    P>|t|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n      female |  -.4744661   .0207939   -22.82   0.000    -.5152332   -.4336989\n       _cons |   6.729774   .0072089   933.53   0.000      6.71564    6.743907\n------------------------------------------------------------------------------\n```\n:::\n:::\n\n\n**3.**\tExtend the specification in (2) that will enable you to test the hypothesis that there is no difference in the wages between the following gender-ethnicity groups. Begin by defining the following dummy variables: \n\n-\t`female_black` = `female`$\\times$`black`\n\n-\t`male_black` = (1-`female`)$\\times$`black`\n\n-\t`female_nonblack` = `female`$\\times$(1-`black`)\n\n-\t`male_nonblack` = (1-`female`)$\\times$(1-`black`)\n\n::: {.cell execution_count=6}\n``` {.stata .cell-code}\ngen female_black=female*black\ngen female_nonblack=female*(1-black)\ngen male_black=(1-female)*black\ngen male_nonblack=(1-female)*(1-black)\n```\n:::\n\n\nThen estimate the following regressions:\n\na. `lwage` on `female_black`, `female_nonblack`, `male_black`, `male_nonblack` (without a constant: option `nocons`)\n\nb.\t`lwage` on `female`, `black`, `female_black`\n\nc.\t`lwage` on `female_black`, `female_nonblack`, `male_black`\n\nFor some of these exercises you may be able to use Stata's factor notation. However, in some instances you will need to manually create the above dummy-variable interactions.\n\nIn each case, identify the base category and write down the parameters of the (implied) model in terms of conditional expectations.\n\n::: {.cell execution_count=7}\n``` {.stata .cell-code}\n* (a)\nreg lwage female_black female_nonblack male_black male_nonblack\n\n// note, Stata has dropped one variable due to perfect collinearity\n\nreg lwage female_black female_nonblack male_black male_nonblack, nocons\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nnote: male_black omitted because of collinearity.\n\n      Source |       SS           df       MS      Number of obs   =     4,165\n-------------+----------------------------------   F(3, 4161)      =    191.17\n       Model |  107.436063         3  35.8120209   Prob > F        =    0.0000\n    Residual |  779.468839     4,161  .187327287   R-squared       =    0.1211\n-------------+----------------------------------   Adj R-squared   =    0.1205\n       Total |  886.904902     4,164  .212993492   Root MSE        =    .43281\n\n------------------------------------------------------------------------------\n       lwage | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]\n-------------+----------------------------------------------------------------\nfemale_black |  -.4434409   .0523433    -8.47   0.000    -.5460617     -.34082\nfemale_non~k |  -.2101553   .0383456    -5.48   0.000    -.2853332   -.1349774\n  male_black |          0  (omitted)\nmale_nonbl~k |   .2239593   .0317691     7.05   0.000     .1616749    .2862436\n       _cons |   6.517691   .0309152   210.82   0.000     6.457081    6.578301\n------------------------------------------------------------------------------\n\n      Source |       SS           df       MS      Number of obs   =     4,165\n-------------+----------------------------------   F(4, 4161)      >  99999.00\n       Model |  185756.485         4  46439.1213   Prob > F        =    0.0000\n    Residual |  779.468839     4,161  .187327287   R-squared       =    0.9958\n-------------+----------------------------------   Adj R-squared   =    0.9958\n       Total |  186535.954     4,165  44.7865436   Root MSE        =    .43281\n\n------------------------------------------------------------------------------\n       lwage | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]\n-------------+----------------------------------------------------------------\nfemale_black |    6.07425   .0422382   143.81   0.000     5.991441     6.15706\nfemale_non~k |   6.307536   .0226856   278.04   0.000      6.26306    6.352012\n  male_black |   6.517691   .0309152   210.82   0.000     6.457081    6.578301\nmale_nonbl~k |    6.74165   .0073159   921.51   0.000     6.727307    6.755993\n------------------------------------------------------------------------------\n```\n:::\n:::\n\n\nThis model returns four parameter-estimates, each corresponding to the four gender-ethnicity groups. These are essentially conditional mean estimates. \n\n::: {.cell execution_count=8}\n``` {.stata .cell-code}\n* (b)\nreg lwage female black female_black\n\n// or, using factor notation:\n\nreg lwage i.female##i.black\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n      Source |       SS           df       MS      Number of obs   =     4,165\n-------------+----------------------------------   F(3, 4161)      =    191.17\n       Model |  107.436063         3  35.8120209   Prob > F        =    0.0000\n    Residual |  779.468839     4,161  .187327287   R-squared       =    0.1211\n-------------+----------------------------------   Adj R-squared   =    0.1205\n       Total |  886.904902     4,164  .212993492   Root MSE        =    .43281\n\n------------------------------------------------------------------------------\n       lwage | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n      female |  -.4341146   .0238361   -18.21   0.000     -.480846   -.3873832\n       black |  -.2239593   .0317691    -7.05   0.000    -.2862436   -.1616749\nfemale_black |  -.0093263    .057515    -0.16   0.871    -.1220865    .1034339\n       _cons |    6.74165   .0073159   921.51   0.000     6.727307    6.755993\n------------------------------------------------------------------------------\n\n      Source |       SS           df       MS      Number of obs   =     4,165\n-------------+----------------------------------   F(3, 4161)      =    191.17\n       Model |  107.436063         3  35.8120209   Prob > F        =    0.0000\n    Residual |  779.468839     4,161  .187327287   R-squared       =    0.1211\n-------------+----------------------------------   Adj R-squared   =    0.1205\n       Total |  886.904902     4,164  .212993492   Root MSE        =    .43281\n\n------------------------------------------------------------------------------\n       lwage | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n    1.female |  -.4341146   .0238361   -18.21   0.000     -.480846   -.3873832\n     1.black |  -.2239593   .0317691    -7.05   0.000    -.2862436   -.1616749\n             |\nfemale#black |\n        1 1  |  -.0093263    .057515    -0.16   0.871    -.1220865    .1034339\n             |\n       _cons |    6.74165   .0073159   921.51   0.000     6.727307    6.755993\n------------------------------------------------------------------------------\n```\n:::\n:::\n\n\nIn this model, we have the following:\n\n-\t$\\beta_1 = E[ln(Wage_i)|F = 0,B = 0]$\n\n-\t$\\beta_2 = E[ln(Wage_i)|F = 1,B = 0]-E[ln(Wage_i)|F = 0,B = 0]$\n\n-\t$\\beta_3 = E[ln(Wage_i)|F = 0,B = 1]-E[ln(Wage_i)|F = 0,B = 0]$\n\n-\t$\\beta_4 = (E[ln(Wage_i)|F = 1,B = 1]-E[ln(Wage_i)|F = 0,B = 1])-(E[ln(Wage_i)|F = 1,B = 0]-E[ln(Wage_i)|F = 0,B = 0])$\n\n::: {.cell execution_count=9}\n``` {.stata .cell-code}\n* (c) \nreg lwage female_black female_nonblack male_black  \n\n// note, this one is harder to replicate using factor notation. \n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n      Source |       SS           df       MS      Number of obs   =     4,165\n-------------+----------------------------------   F(3, 4161)      =    191.17\n       Model |  107.436063         3  35.8120209   Prob > F        =    0.0000\n    Residual |  779.468839     4,161  .187327287   R-squared       =    0.1211\n-------------+----------------------------------   Adj R-squared   =    0.1205\n       Total |  886.904902     4,164  .212993492   Root MSE        =    .43281\n\n------------------------------------------------------------------------------\n       lwage | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]\n-------------+----------------------------------------------------------------\nfemale_black |  -.6674001   .0428671   -15.57   0.000    -.7514426   -.5833576\nfemale_non~k |  -.4341146   .0238361   -18.21   0.000     -.480846   -.3873832\n  male_black |  -.2239593   .0317691    -7.05   0.000    -.2862436   -.1616749\n       _cons |    6.74165   .0073159   921.51   0.000     6.727307    6.755993\n------------------------------------------------------------------------------\n```\n:::\n:::\n\n\nIn this model, we have the following:\n\n-\t$\\beta_1 = E[ln(Wage_i)|F = 0,B = 0]$\n\n-\t$\\beta_2 = E[ln(Wage_i)|F = 1,B = 1]-E[ln(Wage_i)|F = 0,B = 0]$\n\n-\t$\\beta_3 = E[ln(Wage_i)|F = 1,B = 0]-E[ln(Wage_i)|F = 0,B = 0]$\n\n-\t$\\beta_4 = E[ln(Wage_i)|F = 0,B = 1]-E[ln(Wage_i)|F = 0,B = 0]$\n\n**4.**\tCompare the estimated coefficients with the sample average values for the lwage for the four subgroups. What do you see?\n\n::: {.cell execution_count=10}\n``` {.stata .cell-code}\ntable female black, stat(mean lwage)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n------------------------------------------------\n               |               black            \n               |         0          1      Total\n---------------+--------------------------------\nfemale or male |                                \n  0            |   6.74165   6.517691   6.729774\n  1            |  6.307536    6.07425   6.255308\n  Total        |  6.700755   6.363002   6.676346\n------------------------------------------------\n```\n:::\n:::\n\n\nYou can compute the coefficients from each model simply using these averages. \n\n\n**5.** In each of the above models, describe the null hypothesis you would test to evaluate whether there is a significant earnings difference between the earnings of black and non-black females. \n\na.\t$H_0: \\beta_1 = \\beta_2$\n\nb.\t$H_0: \\beta_3 + \\beta_4 = 0$\n\nc.\t$H_0: \\beta_2 - \\beta_3 = 0$\n\n**6.**\tVerify your solution to 4 by performing a test using the three set of regression output. You can use the post-estimation `test` command.\n\n::: {.cell execution_count=11}\n``` {.stata .cell-code}\nreg lwage female_black female_nonblack male_black male_nonblack, nocons\n\ntest female_black = female_nonblack\n\nreg lwage female black female_black\n\ntest female_black + black = 0\n\nreg lwage female_black female_nonblack male_black  \n\ntest female_black - female_nonblack = 0\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n      Source |       SS           df       MS      Number of obs   =     4,165\n-------------+----------------------------------   F(4, 4161)      >  99999.00\n       Model |  185756.485         4  46439.1213   Prob > F        =    0.0000\n    Residual |  779.468839     4,161  .187327287   R-squared       =    0.9958\n-------------+----------------------------------   Adj R-squared   =    0.9958\n       Total |  186535.954     4,165  44.7865436   Root MSE        =    .43281\n\n------------------------------------------------------------------------------\n       lwage | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]\n-------------+----------------------------------------------------------------\nfemale_black |    6.07425   .0422382   143.81   0.000     5.991441     6.15706\nfemale_non~k |   6.307536   .0226856   278.04   0.000      6.26306    6.352012\n  male_black |   6.517691   .0309152   210.82   0.000     6.457081    6.578301\nmale_nonbl~k |    6.74165   .0073159   921.51   0.000     6.727307    6.755993\n------------------------------------------------------------------------------\n\n ( 1)  female_black - female_nonblack = 0\n\n       F(  1,  4161) =   23.68\n            Prob > F =    0.0000\n\n      Source |       SS           df       MS      Number of obs   =     4,165\n-------------+----------------------------------   F(3, 4161)      =    191.17\n       Model |  107.436063         3  35.8120209   Prob > F        =    0.0000\n    Residual |  779.468839     4,161  .187327287   R-squared       =    0.1211\n-------------+----------------------------------   Adj R-squared   =    0.1205\n       Total |  886.904902     4,164  .212993492   Root MSE        =    .43281\n\n------------------------------------------------------------------------------\n       lwage | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n      female |  -.4341146   .0238361   -18.21   0.000     -.480846   -.3873832\n       black |  -.2239593   .0317691    -7.05   0.000    -.2862436   -.1616749\nfemale_black |  -.0093263    .057515    -0.16   0.871    -.1220865    .1034339\n       _cons |    6.74165   .0073159   921.51   0.000     6.727307    6.755993\n------------------------------------------------------------------------------\n\n ( 1)  black + female_black = 0\n\n       F(  1,  4161) =   23.68\n            Prob > F =    0.0000\n\n      Source |       SS           df       MS      Number of obs   =     4,165\n-------------+----------------------------------   F(3, 4161)      =    191.17\n       Model |  107.436063         3  35.8120209   Prob > F        =    0.0000\n    Residual |  779.468839     4,161  .187327287   R-squared       =    0.1211\n-------------+----------------------------------   Adj R-squared   =    0.1205\n       Total |  886.904902     4,164  .212993492   Root MSE        =    .43281\n\n------------------------------------------------------------------------------\n       lwage | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]\n-------------+----------------------------------------------------------------\nfemale_black |  -.6674001   .0428671   -15.57   0.000    -.7514426   -.5833576\nfemale_non~k |  -.4341146   .0238361   -18.21   0.000     -.480846   -.3873832\n  male_black |  -.2239593   .0317691    -7.05   0.000    -.2862436   -.1616749\n       _cons |    6.74165   .0073159   921.51   0.000     6.727307    6.755993\n------------------------------------------------------------------------------\n\n ( 1)  female_black - female_nonblack = 0\n\n       F(  1,  4161) =   23.68\n            Prob > F =    0.0000\n```\n:::\n:::\n\n\n**7.** In each case, test equality across all four gender-ethnicity groups. Again, you should get the same result. \n\n::: {.cell execution_count=12}\n``` {.stata .cell-code}\nreg lwage female_black female_nonblack male_black male_nonblack, nocons\n\ntest female_black = female_nonblack = male_black = male_nonblack\n\nreg lwage female black female_black\n\ntest female_black = black = female = 0\n\nreg lwage female_black female_nonblack male_black  \n\ntest female_black = female_nonblack = male_black = 0\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n      Source |       SS           df       MS      Number of obs   =     4,165\n-------------+----------------------------------   F(4, 4161)      >  99999.00\n       Model |  185756.485         4  46439.1213   Prob > F        =    0.0000\n    Residual |  779.468839     4,161  .187327287   R-squared       =    0.9958\n-------------+----------------------------------   Adj R-squared   =    0.9958\n       Total |  186535.954     4,165  44.7865436   Root MSE        =    .43281\n\n------------------------------------------------------------------------------\n       lwage | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]\n-------------+----------------------------------------------------------------\nfemale_black |    6.07425   .0422382   143.81   0.000     5.991441     6.15706\nfemale_non~k |   6.307536   .0226856   278.04   0.000      6.26306    6.352012\n  male_black |   6.517691   .0309152   210.82   0.000     6.457081    6.578301\nmale_nonbl~k |    6.74165   .0073159   921.51   0.000     6.727307    6.755993\n------------------------------------------------------------------------------\n\n ( 1)  female_black - female_nonblack = 0\n ( 2)  female_black - male_black = 0\n ( 3)  female_black - male_nonblack = 0\n\n       F(  3,  4161) =  191.17\n            Prob > F =    0.0000\n\n      Source |       SS           df       MS      Number of obs   =     4,165\n-------------+----------------------------------   F(3, 4161)      =    191.17\n       Model |  107.436063         3  35.8120209   Prob > F        =    0.0000\n    Residual |  779.468839     4,161  .187327287   R-squared       =    0.1211\n-------------+----------------------------------   Adj R-squared   =    0.1205\n       Total |  886.904902     4,164  .212993492   Root MSE        =    .43281\n\n------------------------------------------------------------------------------\n       lwage | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n      female |  -.4341146   .0238361   -18.21   0.000     -.480846   -.3873832\n       black |  -.2239593   .0317691    -7.05   0.000    -.2862436   -.1616749\nfemale_black |  -.0093263    .057515    -0.16   0.871    -.1220865    .1034339\n       _cons |    6.74165   .0073159   921.51   0.000     6.727307    6.755993\n------------------------------------------------------------------------------\n\n ( 1)  - black + female_black = 0\n ( 2)  - female + female_black = 0\n ( 3)  female_black = 0\n\n       F(  3,  4161) =  191.17\n            Prob > F =    0.0000\n\n      Source |       SS           df       MS      Number of obs   =     4,165\n-------------+----------------------------------   F(3, 4161)      =    191.17\n       Model |  107.436063         3  35.8120209   Prob > F        =    0.0000\n    Residual |  779.468839     4,161  .187327287   R-squared       =    0.1211\n-------------+----------------------------------   Adj R-squared   =    0.1205\n       Total |  886.904902     4,164  .212993492   Root MSE        =    .43281\n\n------------------------------------------------------------------------------\n       lwage | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]\n-------------+----------------------------------------------------------------\nfemale_black |  -.6674001   .0428671   -15.57   0.000    -.7514426   -.5833576\nfemale_non~k |  -.4341146   .0238361   -18.21   0.000     -.480846   -.3873832\n  male_black |  -.2239593   .0317691    -7.05   0.000    -.2862436   -.1616749\n       _cons |    6.74165   .0073159   921.51   0.000     6.727307    6.755993\n------------------------------------------------------------------------------\n\n ( 1)  female_black - female_nonblack = 0\n ( 2)  female_black - male_black = 0\n ( 3)  female_black = 0\n\n       F(  3,  4161) =  191.17\n            Prob > F =    0.0000\n```\n:::\n:::\n\n\n**8.** Try to replicate the F-statistic for one of the above models. Hint, the F-stat for these models is the same as that of the whole model. \n\n::: {.cell execution_count=13}\n``` {.stata .cell-code}\nreg lwage female black female_black\nereturn list\nscalar fstat = (e(r2)*e(df_r))/((1-e(r2))*e(df_m))\nscalar list fstat\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n      Source |       SS           df       MS      Number of obs   =     4,165\n-------------+----------------------------------   F(3, 4161)      =    191.17\n       Model |  107.436063         3  35.8120209   Prob > F        =    0.0000\n    Residual |  779.468839     4,161  .187327287   R-squared       =    0.1211\n-------------+----------------------------------   Adj R-squared   =    0.1205\n       Total |  886.904902     4,164  .212993492   Root MSE        =    .43281\n\n------------------------------------------------------------------------------\n       lwage | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n      female |  -.4341146   .0238361   -18.21   0.000     -.480846   -.3873832\n       black |  -.2239593   .0317691    -7.05   0.000    -.2862436   -.1616749\nfemale_black |  -.0093263    .057515    -0.16   0.871    -.1220865    .1034339\n       _cons |    6.74165   .0073159   921.51   0.000     6.727307    6.755993\n------------------------------------------------------------------------------\n\nscalars:\n                  e(N) =  4165\n               e(df_m) =  3\n               e(df_r) =  4161\n                  e(F) =  191.1735422330181\n                 e(r2) =  .1211359442526956\n               e(rmse) =  .4328132235793649\n                e(mss) =  107.4360627542734\n                e(rss) =  779.4688391479763\n               e(r2_a) =  .1205023003768864\n                 e(ll) =  -2419.902951629166\n               e(ll_0) =  -2688.805870567022\n               e(rank) =  4\n\nmacros:\n            e(cmdline) : \"regress lwage female black female_black\"\n              e(title) : \"Linear regression\"\n          e(marginsok) : \"XB default\"\n                e(vce) : \"ols\"\n             e(depvar) : \"lwage\"\n                e(cmd) : \"regress\"\n         e(properties) : \"b V\"\n            e(predict) : \"regres_p\"\n              e(model) : \"ols\"\n          e(estat_cmd) : \"regress_estat\"\n\nmatrices:\n                  e(b) :  1 x 4\n                  e(V) :  4 x 4\n               e(beta) :  1 x 3\n\nfunctions:\n             e(sample)   \n     fstat =  191.17354\n```\n:::\n:::\n\n\nIn the case where the F-test corresponds to the test of the entire model, you can write the F-statistic in terms of $R^2$. \n\n\n**9.** Estimate the following model:\n\n$$\n\tlwage = \\beta_1 + \\beta_2F + \\beta_3B + \\beta_4F\\times B + \\beta_5exp + \\beta_6exp^2 + \\beta_7educ + \\varepsilon\n$$\n\n-\tInterpret the estimated coeffiecients $\\hat{\\beta}_7$.\n\n-\tInterpret the effect of experience variable `exp`. Use the median level of experience to make your calculation.\n\n::: {.cell execution_count=14}\n``` {.stata .cell-code}\nsum educ, det\nreg lwage i.female##i.black exper expsq educ\n\ndi (exp(_b[educ])-1)*100\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n                     years of education\n-------------------------------------------------------------\n      Percentiles      Smallest\n 1%            6              4\n 5%            8              4\n10%            9              4       Obs               4,165\n25%           12              4       Sum of wgt.       4,165\n\n50%           12                      Mean           12.84538\n                        Largest       Std. dev.      2.787995\n75%           16             17\n90%           17             17       Variance       7.772916\n95%           17             17       Skewness      -.2581161\n99%           17             17       Kurtosis        2.71273\n\n      Source |       SS           df       MS      Number of obs   =     4,165\n-------------+----------------------------------   F(6, 4158)      =    411.81\n       Model |     330.586         6  55.0976667   Prob > F        =    0.0000\n    Residual |  556.318902     4,158   .13379483   R-squared       =    0.3727\n-------------+----------------------------------   Adj R-squared   =    0.3718\n       Total |  886.904902     4,164  .212993492   Root MSE        =    .36578\n\n------------------------------------------------------------------------------\n       lwage | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n    1.female |  -.4032047   .0203208   -19.84   0.000    -.4430444    -.363365\n     1.black |  -.1551546   .0269249    -5.76   0.000    -.2079417   -.1023674\n             |\nfemale#black |\n        1 1  |   -.002071   .0488405    -0.04   0.966    -.0978246    .0936826\n             |\n       exper |   .0427346   .0022404    19.07   0.000     .0383422     .047127\n       expsq |  -.0006982   .0000494   -14.14   0.000    -.0007951   -.0006014\n        educ |   .0731837   .0020983    34.88   0.000     .0690698    .0772975\n       _cons |   5.303667   .0362462   146.32   0.000     5.232606    5.374729\n------------------------------------------------------------------------------\n7.5928119\n```\n:::\n:::\n\n\n-\tA one unit increase in years of educ is associated with an increase of 7.59% in expected wages, holding other regressors fixed. \n\n::: {.cell execution_count=15}\n``` {.stata .cell-code}\nsum exper, det\nreturn list\ndi (exp(_b[exper]+2*r(p50)*_b[expsq])-1)*100\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n             years of full-time work experience\n-------------------------------------------------------------\n      Percentiles      Smallest\n 1%            3              1\n 5%            5              1\n10%            7              1       Obs               4,165\n25%           11              1       Sum of wgt.       4,165\n\n50%           18                      Mean           19.85378\n                        Largest       Std. dev.      10.96637\n75%           29             50\n90%           36             50       Variance       120.2613\n95%           39             50       Skewness       .4000014\n99%           44             51       Kurtosis       2.072064\n\nscalars:\n                  r(N) =  4165\n              r(sum_w) =  4165\n               r(mean) =  19.85378151260504\n                r(Var) =  120.2612759224727\n                 r(sd) =  10.96637022548814\n           r(skewness) =  .4000013893781186\n           r(kurtosis) =  2.072064120792274\n                r(sum) =  82691\n                r(min) =  1\n                r(max) =  51\n                 r(p1) =  3\n                 r(p5) =  5\n                r(p10) =  7\n                r(p25) =  11\n                r(p50) =  18\n                r(p75) =  29\n                r(p90) =  36\n                r(p95) =  39\n                r(p99) =  44\n1.7754427\n```\n:::\n:::\n\n\n-\tA one unit incease in years of experience is associated with an increase of 1.78% in expected wages, holding other regressors fixed. \n\n**10.**\tTheoretically, how would you test the following restrictions for the model below?\n\na.\t$\\beta_2 = \\beta_3$ \n\nb.\t$\\beta_4 + \\beta_5 = 1$\n\nc.\t$\\beta_2 = \\beta_3$ **and** $\\beta_4 + \\beta_5 = 1$\n\n$$\n\tY = \\beta_1 + \\beta_2X_2 + \\beta_3X_3 + \\beta_4X_4 + \\beta_5X_5 + \\varepsilon\n$$\n\na.\tRestrictions 1: $H_0: \\beta_2 = \\beta_3\\Rightarrow \\beta_2-\\beta_3 = 0$. This can be written as a simple T-test (or F-tests), \n\n$$\n\\text{T-stat}  = \\frac{\\hat{\\beta}_2-\\hat{\\beta}_3}{\\sqrt{\\hat{Var}(\\hat{\\beta}_2-\\hat{\\beta}_3)}}\n$$\n\nwhere, \n\n$$\nVar(\\hat{\\beta}_2-\\hat{\\beta}_3) = Var(\\hat{\\beta}_2) + Var(\\hat{\\beta}_3)-2\\cdot Cov(\\hat{\\beta}_2,\\hat{\\beta}_3)\n$$\n\nAlternatively, rewrite the model, adding and subtracting $\\beta_3X_2$ (or $\\beta_2X_3$):\n\n$$\n\tY = \\beta_1 + (\\beta_2-\\beta_3)X_2 + \\beta_3(X_2+X_3) + \\beta_4X_4 + \\beta_5X_5 + \\varepsilon\n$$\n\nThen test the hypothese that the coefficient on $X_2$ is $=0$.\n\nb.\tRestrictions 1: $H_0: \\beta_4 + \\beta_5 = 1$. This can be written as a simple T-test, \n\n$$\n\\text{T-stat} = \\frac{\\hat{\\beta}_4+\\hat{\\beta}_5-1}{\\sqrt{\\hat{Var}(\\hat{\\beta}_4+\\hat{\\beta}_5})}\n$$\n\nwhere, \n\n$$\nVar(\\hat{\\beta}_4+\\hat{\\beta}_5) = Var(\\hat{\\beta}_4) + Var(\\hat{\\beta}_5)+2\\cdot Cov(\\hat{\\beta}_4,\\hat{\\beta}_5)\n$$\n\nAlternatively, rewrite the model, adding and subtracting $\\beta_5X_4-X_5$ (or $\\beta_2X_3$):\n\n$$\n\tY-X_4 = \\beta_1 + \\beta_2X_2 + \\beta_3X_3 + (\\beta_4+\\beta_5-1)X_4 + (\\beta_5)(X_5-X_4) + \\varepsilon\n$$\n\nThen test the hypothese that the coefficient on $X_4$ is $=0$.\n\nc.\tTo test both of the linear restrictions simultaneously, we would use an F-test. \n\nStep 1: estimate the unrestricted model\n\n$$\n\tY = \\beta_1 + \\beta_2X_2 + \\beta_3X_3 + \\beta_4X_4 + \\beta_5X_5 + \\varepsilon\n$$\n\nStore the $SSR_U$\n\nStep 2: estimate the restricted model\n\n$$\n\t(Y-X_4) = \\gamma_1 + \\gamma_2(X_2+X_3) + \\gamma_5(X_5-X_4) + \\varepsilon\n$$\n\nStore the $SSR_R$. \n\nStep 3: Compute the F-statistic\n\n$$\n\\text{F-stat} = \\frac{(SSR_R-SSR_U)/(df_R-df_U)}{SSR_U/df_U}\n$$\n\n## Postamble\n\n::: {.cell execution_count=16}\n``` {.stata .cell-code}\nlog close\n```\n:::\n\n\n",
    "supporting": [
      "problem-set-2-solutions_files\\figure-pdf"
    ],
    "filters": []
  }
}